# TrueCheckIA Serverless Configuration
# Copy this file to .env and update with your values

# =====================================
# CORE APPLICATION
# =====================================
NODE_ENV=production
DATABASE_URL=postgresql://user:password@host:5432/truecheckia

# =====================================
# AUTHENTICATION & SECURITY
# =====================================
JWT_SECRET=your-super-secret-jwt-key-here
JWT_REFRESH_SECRET=your-super-secret-refresh-key-here
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# =====================================
# UPSTASH REDIS (REQUIRED FOR SERVERLESS)
# =====================================
# Get these from https://upstash.com/
UPSTASH_REDIS_REST_URL=https://your-redis-db.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token-here

# =====================================
# VERCEL SERVERLESS CONFIGURATION
# =====================================
# Security tokens for webhook authentication
CRON_SECRET=your-cron-secret-for-scheduled-jobs
WEBHOOK_SECRET=your-webhook-secret-for-processing

# Force serverless mode (optional for development)
FORCE_SERVERLESS=true

# =====================================
# OPENAI INTEGRATION
# =====================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=org-your-org-id-here

# =====================================
# STRIPE PAYMENTS
# =====================================
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_PRO_PRICE_ID=price_your-pro-price-id
STRIPE_ENTERPRISE_PRICE_ID=price_your-enterprise-price-id

# =====================================
# EMAIL CONFIGURATION
# =====================================
# Resend (recommended for production)
RESEND_API_KEY=re_your-resend-api-key
RESEND_FROM_EMAIL=TrueCheckIA <noreply@yourdomain.com>

# SMTP Fallback (for development)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@truecheckia.com

# =====================================
# FRONTEND CONFIGURATION
# =====================================
FRONTEND_URL=https://your-frontend-domain.vercel.app
API_BASE_URL=https://your-api-domain.vercel.app

# CORS configuration (comma-separated)
CORS_ORIGINS=https://your-frontend-domain.vercel.app,https://www.yourdomain.com

# =====================================
# RATE LIMITING & PERFORMANCE
# =====================================
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=900000
CACHE_TTL=86400

# =====================================
# ANALYTICS (OPTIONAL)
# =====================================
NEXT_PUBLIC_POSTHOG_KEY=phc_your-posthog-key
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# =====================================
# SERVERLESS QUEUE CONFIGURATION
# =====================================
# These are used internally by the serverless queue system
QUEUE_RETRY_ATTEMPTS=3
QUEUE_RETRY_DELAY=2000
QUEUE_MAX_CONCURRENT=10

# Email queue configuration
EMAIL_QUEUE_RETRY_ATTEMPTS=3
EMAIL_QUEUE_RETRY_DELAY=5000

# Analysis queue configuration
ANALYSIS_QUEUE_PRIORITY_DELAY=0
ANALYSIS_QUEUE_NORMAL_DELAY=1000

# Credits queue configuration
CREDITS_RESET_HOUR=3
CREDITS_CHECK_HOUR=10
CREDITS_CLEANUP_HOUR=2

# =====================================
# DEVELOPMENT OVERRIDES
# =====================================
# Uncomment these for local development

# Use local Redis instead of Upstash (development only)
# REDIS_URL=redis://localhost:6379

# Local API URL (development only)
# API_BASE_URL=http://localhost:4000

# Local frontend URL (development only)
# FRONTEND_URL=http://localhost:5173

# Debug mode
# DEBUG=queue:*,redis:*,upstash:*

# =====================================
# MIGRATION HELPERS
# =====================================
# These help during the migration process

# Test both queue systems (useful during migration)
TEST_BOTH_SYSTEMS=false

# Enable migration logs
MIGRATION_DEBUG=true

# Fallback to traditional queues if serverless fails
SERVERLESS_FALLBACK=false