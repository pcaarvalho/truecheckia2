# ==========================================
# VERCEL PREVIEW ENVIRONMENT VARIABLES
# ==========================================
# Use this template for Preview/Staging environments (PR deployments)
# Run: npx vercel env add [VAR_NAME] preview
# Or: ./scripts/setup-vercel-env.sh preview

# ==========================================
# CRITICAL BACKEND VARIABLES (REQUIRED)
# ==========================================

# Database Configuration (Neon PostgreSQL - Preview Branch)
DATABASE_URL="postgresql://username:password@host:5432/preview_db?sslmode=require&pgbouncer=true"
DIRECT_URL="postgresql://username:password@host:5432/preview_db?sslmode=require"
SHADOW_DATABASE_URL="postgresql://username:password@host:5432/preview_shadow_db?sslmode=require"

# Redis Configuration (Upstash - Preview Database)
UPSTASH_REDIS_REST_URL="https://region.rest.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-upstash-preview-token"

# OpenAI API (Test/Development Key)
OPENAI_API_KEY="sk-your-test-openai-api-key"
OPENAI_ORG_ID="org-your-org-id"

# Authentication & Security (Different from Production)
JWT_SECRET="your-preview-jwt-secret-256-bits-minimum"
JWT_REFRESH_SECRET="your-preview-refresh-secret-256-bits-minimum"
JWT_EXPIRES_IN="7d"
JWT_REFRESH_EXPIRES_IN="30d"

# Serverless Security (Different from Production)
WEBHOOK_SECRET="preview-webhook-authentication-secret-64-chars"
CRON_SECRET="preview-cron-authentication-secret-64-chars"

# ==========================================
# PAYMENT PROCESSING (STRIPE TEST)
# ==========================================
STRIPE_SECRET_KEY="sk_test_your-test-stripe-secret-key"
STRIPE_WEBHOOK_SECRET="whsec_your-test-stripe-webhook-secret"
STRIPE_PUBLISHABLE_KEY="pk_test_your-test-stripe-publishable-key"
STRIPE_PRO_PRICE_ID="price_your_test_pro_price_id"
STRIPE_ENTERPRISE_PRICE_ID="price_your_test_enterprise_price_id"

# ==========================================
# EMAIL SERVICE (RESEND - Test Domain)
# ==========================================
RESEND_API_KEY="re_your-test-resend-api-key"
RESEND_FROM_EMAIL="TrueCheckIA Preview <noreply@preview.yourdomain.com>"

# ==========================================
# APPLICATION CONFIGURATION
# ==========================================
NODE_ENV="production"
FRONTEND_URL="https://truecheckia-preview.vercel.app"
API_BASE_URL="https://truecheckia-preview.vercel.app"
CORS_ORIGINS="https://truecheckia-preview.vercel.app,https://*.vercel.app"

# ==========================================
# PERFORMANCE & LIMITS (Relaxed for Testing)
# ==========================================
RATE_LIMIT_MAX="500"
RATE_LIMIT_WINDOW_MS="900000"
CACHE_TTL="3600"

# ==========================================
# CRITICAL FRONTEND VARIABLES (VITE_)
# ==========================================
# These MUST be set in Vercel for frontend build

# API Configuration
VITE_API_BASE_URL="https://truecheckia-preview.vercel.app/api"
VITE_APP_URL="https://truecheckia-preview.vercel.app"

# Stripe Frontend
VITE_STRIPE_PUBLISHABLE_KEY="pk_test_your-test-stripe-publishable-key"

# Environment
VITE_ENV="preview"

# Optional Analytics (Disabled or Separate)
VITE_POSTHOG_KEY=""
VITE_POSTHOG_HOST=""
VITE_SENTRY_DSN=""

# ==========================================
# TESTING & DEBUG (OPTIONAL)
# ==========================================
DEBUG="true"
LOG_LEVEL="debug"
ENABLE_QUERY_LOGGING="true"

# ==========================================
# AUTO-SET BY VERCEL (INFO ONLY)
# ==========================================
# These are automatically provided by Vercel:
# VERCEL="1"
# VERCEL_ENV="preview"
# VERCEL_URL="truecheckia-git-branch-user.vercel.app"
# VERCEL_REGION="iad1"
# VERCEL_GIT_COMMIT_SHA="..."
# VERCEL_GIT_COMMIT_REF="feature-branch"

# ==========================================
# CONFIGURATION VALIDATION
# ==========================================
# Run validation script after setting variables:
# ./scripts/validate-vercel-env.sh preview